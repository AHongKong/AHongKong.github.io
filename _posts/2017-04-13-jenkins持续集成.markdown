---
layout: post
title:  "Jenkins æŒç»­é›†æˆ"
date:   2017-04-13 13:40:34 +0800
categories: æµ‹è¯• unfinished
---

æ“ä½œç³»ç»Ÿï¼šMac OS

step 1:

	[ç‚¹å‡»æ­¤å¤„åˆ°jenkinså®˜ç½‘ä¸‹è½½Mac OSçš„å®‰è£…åŒ…](https://jenkins.io/index.html)

step 2:

	ä¸‹è½½å®Œæˆåï¼Œç‚¹å‡»Jenkinsçš„pkgå®‰è£…åŒ…ï¼Œå®Œæˆå®‰è£…å¼•å¯¼æ­¥éª¤ã€‚
	
	ä¼šç¢°åˆ°çš„é—®é¢˜ï¼šHow to â€œUnlock Jenkinsâ€?
	
	è§£å†³æ–¹æ¡ˆï¼š
	åœ¨ç»ˆç«¯æ‰§è¡ŒğŸ‘‡çš„å‘½ä»¤ï¼Œå¯ä»¥è·å–å¯†ç ã€‚psï¼ˆè·¯å¾„éœ€è¦æ›´æ¢æˆä½ çš„initialAdminPasswordçš„æç¤ºè·¯å¾„ï¼‰
	
	sudo more /Users/Shared/Jenkins/Home/secrets/initialAdminPassword


step 3:

	Customize Jenkins å®‰è£…éœ€è¦çš„æ’ä»¶
	å®‰è£…GitLabæ’ä»¶
	å› ä¸ºæˆ‘ä»¬ç”¨çš„æ˜¯GitLabæ¥ç®¡ç†æºä»£ç ï¼ŒJenkinsæœ¬èº«å¹¶æ²¡æœ‰è‡ªå¸¦GitLabæ’ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¾æ¬¡é€‰æ‹© ç³»ç»Ÿç®¡ç†->ç®¡ç†æ’ä»¶ï¼Œåœ¨â€œå¯é€‰æ’ä»¶â€ä¸­é€‰ä¸­â€œGitLab Pluginâ€å’Œâ€œGitlab Hook Pluginâ€è¿™ä¸¤é¡¹ï¼Œç„¶åå®‰è£…ã€‚
	
	å®‰è£…Xcodeæ’ä»¶
	åŒå®‰è£…GitLabæ’ä»¶çš„æ­¥éª¤ä¸€æ ·ï¼Œæˆ‘ä»¬ä¾æ¬¡é€‰æ‹©ç³»ç»Ÿç®¡ç†->ç®¡ç†æ’ä»¶ï¼Œåœ¨â€œå¯é€‰æ’ä»¶â€ä¸­é€‰ä¸­â€œXcode integrationâ€å®‰è£…ã€‚
	
	å®‰è£…ç­¾åè¯ä¹¦ç®¡ç†æ’ä»¶
	iOSæ‰“åŒ…å†…æµ‹ç‰ˆæ—¶ï¼Œéœ€è¦å‘å¸ƒè¯ä¹¦åŠç›¸å…³ç­¾åæ–‡ä»¶ï¼Œå› æ­¤è¿™ä¸¤ä¸ªæ’ä»¶å¯¹äºç®¡ç†iOSè¯ä¹¦éå¸¸æ–¹ä¾¿ã€‚è¿˜æ˜¯åœ¨ç³»ç»Ÿç®¡ç†->ç®¡ç†æ’ä»¶ï¼Œåœ¨â€œå¯é€‰æ’ä»¶â€ä¸­é€‰ä¸­â€œCredentials Binding Pluginâ€å’Œâ€œKeychains and Provisioning Profiles Managementâ€å®‰è£…ã€‚
	
	å®‰è£…FTPæ’ä»¶
	åœ¨ç³»ç»Ÿç®¡ç†->ç®¡ç†æ’ä»¶ï¼Œåœ¨â€œå¯é€‰æ’ä»¶â€ä¸­é€‰ä¸­â€œPublish over FTPâ€å®‰è£…ã€‚

	å®‰è£…è„šæœ¬æ’ä»¶
	è¿™ä¸ªæ’ä»¶çš„åŠŸèƒ½ä¸»è¦æ˜¯ç”¨äºåœ¨buildåæ‰§è¡Œç›¸å…³è„šæœ¬ã€‚åœ¨ç³»ç»Ÿç®¡ç†->ç®¡ç†æ’ä»¶ï¼Œåœ¨â€œå¯é€‰æ’ä»¶â€ä¸­é€‰ä¸­â€œGlobal Post Script Pluginâ€å®‰è£…ã€‚

step 4:

è‡ªåŠ¨åŒ–æ„å»º
æ–°å»ºé¡¹ç›®Item -> è¾“å…¥Item name -> é€‰æ‹©ä¸€ä¸ªè‡ªç”±é£æ ¼çš„è½¯ä»¶é¡¹ç›® -> ç‚¹å‡»OK

é…ç½®é¡¹ç›® -> è·¯å¾„ï¼šJekins/é¡¹ç›®å/é…ç½®/General æè¿°é¡¹ç›®åŸºæœ¬ä¿¡æ¯

é…ç½®é¡¹ç›® -> è·¯å¾„ï¼šJekins/é¡¹ç›®å/é…ç½®/æºç ç®¡ç† æè¿°git Repositories

[é…ç½®å…¶ä»–å‚ç…§ç®€ä¹¦ä¸€ç¯‡æ–‡ç« ](http://www.jianshu.com/p/41ecb06ae95f)

Keychains and Provisioning Profiles Management çš„é…ç½®

`å…³äºkeychainsçš„æŸ¥æ‰¾`

ç»ˆç«¯è¾“å…¥å‘½ä»¤
	
	~/Library/Keychains
	ls
	æŸ¥æ‰¾login.keychain æˆ–è€…login_renamed_2.keychain çœ‹å“ªä¸ªæ˜¯å¯ä»¥ç”¨çš„ï¼Œç›´æ¥åˆ°ç›®å½•ä¸‹æ‹·è´ä¸€ä»½ä¸Šä¼ åˆ°Jenkinsã€‚

[ç‚¹å‡»æŸ¥çœ‹](http://www.jianshu.com/p/e19c8327b167)
Code Signing Identity å’Œé…ç½®Xcodeçš„Code Signing Identityæ˜¯ä¸€æ ·çš„åå­—

`Provisioning Profile æŸ¥æ‰¾ä¸ä¸Šä¼ `
ä¸€èˆ¬iOSå¼€å‘è€…çš„ç”µè„‘éƒ½ä¼šæœ‰ï¼Œæ‰“å¼€Xcode/preference/Accounts/å¼€å‘è€…è´¦å·ï¼Œç‚¹å‡»view detailsï¼Œç‚¹å‡»å¯¹åº”çš„æè¿°è¯ä¹¦ï¼ŒåŒå‡»ï¼Œé€‰æ‹©èœå•ä¸­çš„show in finderï¼Œæ‹·è´ä¸€ä»½ï¼Œä¸Šä¼ ã€‚

æ„å»ºé…ç½®

ç‚¹å‡»æ·»åŠ æ„å»ºæ­¥éª¤ï¼Œé€‰æ‹©execute shellï¼Œå¯ä»¥åœ¨commandè¾“å…¥æ¡†ä¸­è¾“å…¥å¯¹åº”æ‰§è¡Œçš„å‘½ä»¤

æ„å»ºåçš„æ“ä½œ

ç‚¹å‡»æ·»åŠ æ„å»ºåçš„æ“ä½œæ­¥éª¤ï¼Œé€‰æ‹©Execute a set of scripts

å®Œæˆä¸Šè¿°å·¥ä½œã€‚
___
è‡ªåŠ¨æ‰“åŒ…ï¼šGUIæ‰“åŒ…ï¼ˆä½¿ç”¨Xcodeï¼‰ï¼Œå‘½ä»¤è¡Œæ‰“åŒ…ï¼ˆé‡ç‚¹ï¼‰

[xcodebuild](https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man1/xcodebuild.1.html)

[xcrun](https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man1/xcrun.1.html)

	xcrun -sdk iphoneos -v PackageApplication + ä¸€äº›å‚æ•°

è‡ªåŠ¨åŒ–æ‰“åŒ…è„šæœ¬

ç¬¬ä¸€ç§ï¼šxcodebuild + xcrun æ‰“åŒ…è„šæœ¬ï¼ˆæ­¥éª¤æ˜“è¯»ï¼‰
xcodebuild æœ‰ä¸€ä¸ªå«[xctool](https://github.com/facebook/xctool)çš„å·¥å…·é›†facebookå‡ºå“

ç¬¬äºŒç§ï¼šgym æ‰“åŒ…è„šæœ¬
fastlaneæ˜¯ä¸€å¥—è‡ªåŠ¨åŒ–æ‰“åŒ…çš„å·¥å…·é›†ï¼Œç”¨ Ruby å†™çš„ï¼Œç”¨äº iOS å’Œ Android çš„è‡ªåŠ¨åŒ–æ‰“åŒ…å’Œå‘å¸ƒç­‰å·¥ä½œã€‚gymæ˜¯å…¶ä¸­çš„æ‰“åŒ…å‘½ä»¤ã€‚

æœ€åä¸€æ­¥ï¼Œä¸Šä¼ åˆ†å‘å¹³å°çš„è„šæœ¬

å­¦ä¹ çš„Jenkinsç»“æˆå‚è€ƒåšå®¢ï¼šç®€ä¹¦ä½œè€…[ä¸€ç¼•æ®‡æµåŒ–éšåŠè¾¹å†°éœœ](http://www.jianshu.com/p/41ecb06ae95f)
